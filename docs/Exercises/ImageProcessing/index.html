<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Exercise Image Processing # Exercise 5
Exercise Implement an image / video processing app supporting different masks, including other kernel sizes different than 3x3, and:
A region-of-interest base tool to selectively apply a given mask.Hint: circular regions around the mouse pointer are handy and quite simple to implement by means of glsl distance. A magnifier tool. Requires a bit of research. For instance, look for it in shadertoy. Integrate luma and other coloring brightness tools."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Exercise Image Processing # Exercise 5
Exercise Implement an image / video processing app supporting different masks, including other kernel sizes different than 3x3, and:
A region-of-interest base tool to selectively apply a given mask.Hint: circular regions around the mouse pointer are handy and quite simple to implement by means of glsl distance. A magnifier tool. Requires a bit of research. For instance, look for it in shadertoy. Integrate luma and other coloring brightness tools."><meta property="og:type" content="article"><meta property="og:url" content="https://ctatis1.github.io/showcase/docs/Exercises/ImageProcessing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-19T12:34:11-05:00"><title>Image Processing | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-997e8eead69c824b469bf5769377457d class=toggle checked>
<label for=section-997e8eead69c824b469bf5769377457d class="flex justify-between"><a href=/showcase/docs/Exercises/>Exercises</a></label><ul><li><a href=/showcase/docs/Exercises/ColorBlend/>Color Blend</a></li><li><a href=/showcase/docs/Exercises/ColorModels/>Color Models</a></li><li><a href=/showcase/docs/Exercises/ImageProcessing/ class=active>Image Processing</a></li><li><a href=/showcase/docs/Exercises/Photomosaic/>Photomosaic</a></li><li><a href=/showcase/docs/Exercises/TerrainVisualizationApp/>Terrain Visualization App</a></li><li><a href=/showcase/docs/Exercises/Texturing/>Texturing</a></li><li><a href=/showcase/docs/Exercises/VisualMasking/>Visual Masking</a></li></ul></li><li><input type=checkbox id=section-9370f1a5d0248572ac505e0c6d4ad190 class=toggle>
<label for=section-9370f1a5d0248572ac505e0c6d4ad190 class="flex justify-between"><a href=/showcase/docs/shortcodes/>Shortcodes</a></label><ul><li><a href=/showcase/docs/shortcodes/buttons/>Buttons</a></li><li><a href=/showcase/docs/shortcodes/columns/>Columns</a></li><li><a href=/showcase/docs/shortcodes/details/>Details</a></li><li><a href=/showcase/docs/shortcodes/hints/>Hints</a></li><li><a href=/showcase/docs/shortcodes/katex/>Katex</a></li><li><a href=/showcase/docs/shortcodes/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-ec67a64aba70b9df3d2a9acd6c92e3bc class=toggle>
<label for=section-ec67a64aba70b9df3d2a9acd6c92e3bc class="flex justify-between"><a href=/showcase/docs/shortcodes/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/p5/iframe/>Iframe</a></li><li><a href=/showcase/docs/shortcodes/p5/div/>Div</a></li></ul></li><li><a href=/showcase/docs/shortcodes/tabs/>Tabs</a></li></ul></li><li><input type=checkbox id=section-34e51df5e15571a3bbf4f00725271179 class=toggle>
<label for=section-34e51df5e15571a3bbf4f00725271179 class="flex justify-between"><a href=/showcase/docs/Videos/>Videos</a></label><ul></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Image Processing</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#exercise-image-processing>Exercise Image Processing</a><ul><li><a href=#background-information>Background Information</a><ul><li><a href=#convolution-matrix>Convolution Matrix</a></li><li><a href=#region-of-interest-roi>Region of Interest (ROI)</a></li><li><a href=#luma>Luma</a></li><li><a href=#magnifier>Magnifier</a></li></ul></li><li><a href=#original-image>Original Image</a></li><li><a href=#code>Code</a></li><li><a href=#conclusions>Conclusions</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=exercise-image-processing>Exercise Image Processing
<a class=anchor href=#exercise-image-processing>#</a></h1><blockquote class="book-hint info"><p><strong>Exercise 5</strong><br>Exercise
Implement an image / video processing app supporting different masks, including other kernel sizes different than 3x3, and:</p><ul><li>A region-of-interest base tool to selectively apply a given mask.Hint: circular regions around the mouse pointer are handy and quite simple to implement by means of glsl distance.</li><li>A magnifier tool. Requires a bit of research. For instance, look for it in shadertoy.</li><li>Integrate luma and other coloring brightness tools.
What other shader tools would you implement?</li></ul></blockquote><h2 id=background-information>Background Information
<a class=anchor href=#background-information>#</a></h2><h3 id=convolution-matrix>Convolution Matrix
<a class=anchor href=#convolution-matrix>#</a></h3><p>In image processing, a kernel, convolution matrix, or mask is a small matrix used for blurring, sharpening, embossing, edge detection, and more. This is accomplished by doing a convolution between the kernel and an image. Or more simply, when each pixel in the output image is a function of the nearby pixels (including itself) in the input image, the kernel is that function.</p><ul><li>Ridges or edge detection: is the attempt, via software, to locate ridges in an image, defined as curves whose points are local maxima of the function, akin to geographical ridges.</li><li>Identity: is a function that always returns the value that was used as its argument, unchanged.</li><li>Gaussian Blur 3x3: a Gaussian blur (also known as Gaussian smoothing) is the result of blurring an image by a Gaussian function. It is a widely used effect in graphics software, typically to reduce image noise and reduce detail.</li></ul><img src=/showcase/docs/imageProcessing/kernel.png alt=kernel><h3 id=region-of-interest-roi>Region of Interest (ROI)
<a class=anchor href=#region-of-interest-roi>#</a></h3><p>Is a sample within a data set identified for a particular purpose. The concept of a ROI is commonly used in many application areas. For example, in medical imaging, the boundaries of a tumor may be defined on an image or in a volume, for the purpose of measuring its size.</p><h3 id=luma>Luma
<a class=anchor href=#luma>#</a></h3><p>Represents the brightness in an image (the &ldquo;black-and-white&rdquo; or achromatic portion of the image). Luma is typically paired with chrominance. Luma represents the achromatic image, while the chroma components represent the color information. Converting R′G′B′ sources (such as the output of a three-CCD camera) into luma and chroma allows for chroma subsampling: because human vision has finer spatial sensitivity to luminance (&ldquo;black and white&rdquo;) differences than chromatic differences, video systems can store and transmit chromatic information at lower resolution, optimizing perceived detail at a particular bandwidth.</p><h3 id=magnifier>Magnifier
<a class=anchor href=#magnifier>#</a></h3><p>Magnifier is an excellent way to attract attention to the part of the picture, which does not require much effort. Here you will learn how to create a magnifying glass from simple PowerPoint shapes and fit a magnified picture into it.</p><img src=/showcase/docs/imageProcessing/magnifier.png alt=SAvatar><h2 id=original-image>Original Image
<a class=anchor href=#original-image>#</a></h2><img src=/showcase/docs/photomosaic/Lego.jpg alt=SAvatar><h2 id=code>Code
<a class=anchor href=#code>#</a></h2><p><details><summary>Photomosaic.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>texture</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texOffset</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>mouseAction</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>mask</span>[<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>apply_mask</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>luma</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>roi</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>magnifier</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>actionRadius</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>Zoom</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2.0</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texcoords2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> <span style=color:#a6e22e>lumaFunction</span>(<span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>texel</span>) {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>r</span><span style=color:#f92672>*</span><span style=color:#ae81ff>0.299</span>) <span style=color:#f92672>+</span> (<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>g</span><span style=color:#f92672>*</span><span style=color:#ae81ff>0.587</span>) <span style=color:#f92672>+</span> (<span style=color:#a6e22e>texel</span>.<span style=color:#a6e22e>b</span><span style=color:#f92672>*</span><span style=color:#ae81ff>0.114</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>currTexture</span>, <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>point</span>){
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>magnifier</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>distance</span>(<span style=color:#a6e22e>point</span>,<span style=color:#a6e22e>mouseAction</span>) <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>actionRadius</span>){
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>centerVector</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>point</span><span style=color:#f92672>-</span><span style=color:#a6e22e>mouseAction</span>;
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>centerVector</span> <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#a6e22e>Zoom</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>centerVector</span>;
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>currTexture</span>,<span style=color:#a6e22e>mouseAction</span><span style=color:#f92672>+</span><span style=color:#a6e22e>centerVector</span>);
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>currTexture</span>,<span style=color:#a6e22e>point</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>apply_mask</span> <span style=color:#f92672>&amp;&amp;</span> (<span style=color:#a6e22e>roi</span><span style=color:#f92672>==</span><span style=color:#66d9ef>false</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>distance</span>(<span style=color:#a6e22e>texcoords2</span>,<span style=color:#a6e22e>mouseAction</span>)<span style=color:#f92672>&lt;=</span><span style=color:#a6e22e>actionRadius</span>)){
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc0</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc5</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc6</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc7</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc8</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc0</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc1</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc2</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc3</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc4</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc5</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc6</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc7</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc8</span>);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>convolution</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#ae81ff>0.0</span>,<span style=color:#ae81ff>0.0</span>,<span style=color:#ae81ff>0.0</span>,<span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>9</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>convolution</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>rgba</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>*</span><span style=color:#a6e22e>mask</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>convolution</span>.<span style=color:#a6e22e>rgb</span>, <span style=color:#ae81ff>1.0</span>); 
</span></span><span style=display:flex><span> }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnifiedTexture</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>texcoords2</span>);
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>luma</span>){
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>((<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>lumaFunction</span>(<span style=color:#a6e22e>gl_FragColor</span>.<span style=color:#a6e22e>rgb</span>))), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><details><summary>Photomosaic</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>shaderM</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>maskCB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lumaCB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>roiCB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>magnifierCB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>radiusSlider</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>shaderM</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/showcase/docs/imageProcessing/mask.frag&#39;</span>,{ <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span> <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/docs/imageProcessing/Lego.jpg&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>640</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>shaderM</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>magnifierCB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Magnifier&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>magnifierCB</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>magnifierCB</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>magnifierCB</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>uniformUpdate</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>maskCB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>maskCB</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>maskCB</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>maskCB</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>uniformUpdate</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>lumaCB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Luma&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>lumaCB</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>70</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>lumaCB</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>lumaCB</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>uniformUpdate</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>roiCB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;Region of interest&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>roiCB</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>90</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>roiCB</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>roiCB</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>uniformUpdate</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>radiusSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>radiusSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>110</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>radiusSlider</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;width&#39;</span>, <span style=color:#e6db74>&#39;80px&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>sel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span> <span style=color:#a6e22e>sel</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>sel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Gaussian blur&#39;</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>sel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Edges&#39;</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>sel</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>uniformUpdate</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>uniformUpdate</span>(); 
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>quad</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span> <span style=color:#a6e22e>shaderM</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mouseAction&#39;</span>, [<span style=color:#a6e22e>mouseX</span><span style=color:#f92672>/</span><span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>mouseY</span><span style=color:#f92672>/</span><span style=color:#a6e22e>height</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uniformUpdate</span>(){
</span></span><span style=display:flex><span> <span style=color:#a6e22e>shaderM</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;apply_mask&#39;</span>,<span style=color:#a6e22e>maskCB</span>.<span style=color:#a6e22e>checked</span>());
</span></span><span style=display:flex><span> <span style=color:#a6e22e>shaderM</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;luma&#39;</span>,<span style=color:#a6e22e>lumaCB</span>.<span style=color:#a6e22e>checked</span>());
</span></span><span style=display:flex><span> <span style=color:#a6e22e>shaderM</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;roi&#39;</span>,<span style=color:#a6e22e>roiCB</span>.<span style=color:#a6e22e>checked</span>());
</span></span><span style=display:flex><span> <span style=color:#a6e22e>shaderM</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;magnifier&#39;</span>,<span style=color:#a6e22e>magnifierCB</span>.<span style=color:#a6e22e>checked</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>sel</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;Gaussian blur&#39;</span>){
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>shaderM</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> , <span style=color:#ae81ff>2.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> , <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> ,  
</span></span><span style=display:flex><span>                               <span style=color:#ae81ff>2.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> , <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> , <span style=color:#ae81ff>2.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> ,  
</span></span><span style=display:flex><span>                                 <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> , <span style=color:#ae81ff>2.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span> , <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>16.0</span>]);
</span></span><span style=display:flex><span> }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>sel</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;Edges&#39;</span>){
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>shaderM</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, [<span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> ,  
</span></span><span style=display:flex><span>                               <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> , <span style=color:#ae81ff>8.0</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> ,  
</span></span><span style=display:flex><span>                               <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> , <span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span> , ]);
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details></p><iframe style=width:680px;height:680px srcdoc='
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script>
               
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
<script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.min.js></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js"></script>
<script src="/showcase/docs/imageProcessing/imageProcessing.js"></script> 


            </script>
          </head>
          <body>
          </body>
        </html>
      '></iframe><h2 id=conclusions>Conclusions
<a class=anchor href=#conclusions>#</a></h2><p>With shaders, working with image convolutions is very flexible, especially when controlling several textures at once. We can build strong tools that can be utilized from p5 and other processing languages by giving the fragment shader access to our entire texture. Convolutions are a powerful tool for producing striking visual effects, and by using shaders to implement them, they are adaptable and may be used independently on various objects and regions.</p><h2 id=references>References
<a class=anchor href=#references>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Kernel_%28image_processing%29>Kernel (image processing)</a></li><li><a href=https://www.officetooltips.com/powerpoint_365/tips/how_to_create_a_magnifying_glass_and_apply_the_magnifier_effect_to_the_picture.html>How to create a magnifying glass and apply the magnifier effect to the picture</a> by officetooltips</li><li><a href=https://www.shadertoy.com/view/mdfXzX>Sample Magnifier</a> by Shadertoy</li><li><a href="https://en.wikipedia.org/wiki/Luma_%28video%29#:~:text=In%20video%2C%20luma%20represents%20the,components%20represent%20the%20color%20information.">Luma(video)</a></li><li><a href=chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://web.pdx.edu/~jduh/courses/Archive/geog481w07/Students/Ludwig_ImageConvolution.pdf>Image Convolution</a> by Jamie Ludwig</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/ctatis1/showcase/commit/d4ff28901486d34d7b4cb4e2e9415da32a45cf7c title='Last modified by Camilo Tatis | June 19, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 19, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#exercise-image-processing>Exercise Image Processing</a><ul><li><a href=#background-information>Background Information</a><ul><li><a href=#convolution-matrix>Convolution Matrix</a></li><li><a href=#region-of-interest-roi>Region of Interest (ROI)</a></li><li><a href=#luma>Luma</a></li><li><a href=#magnifier>Magnifier</a></li></ul></li><li><a href=#original-image>Original Image</a></li><li><a href=#code>Code</a></li><li><a href=#conclusions>Conclusions</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></aside></main></body></html>